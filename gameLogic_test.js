describe("Blokus", function() {
  var _gameLogic;

  beforeEach(module("myApp"));

  beforeEach(inject(function (gameLogic) {
    _gameLogic = gameLogic;
  }));
  it("get initial board", function () {
	 var expectedBoard = [['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','',''],
	                      ['','','','','','','','','','','','','','','','','','','','']];
	 var generatedBoard = _gameLogic.getInitialBoard();
	 expect(angular.equals(expectedBoard, generatedBoard)).toBe(true);
  });
  
  it ("an example of a legal placement", function() {
	 var board =  [['0','','','','','','','','','','','','','','','','','','','1'],
                   ['0','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['','','','','','','','','','','','','','','','','','','',''],
                   ['2','','','','','','','','','','','','','','','','','','','3']];
	 var placement = [[2,1]];
	 var turnIndex = 0;
	 expect(_gameLogic.legalPlacement(board, placement, turnIndex)).toBe(true);
  });
  
  it ("an example of an illegal placement", function() {
		 var board =  [['0','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','','']];
		 var placement = [[0,1]];
		 var turnIndex = 0;
		 expect(_gameLogic.legalPlacement(board, placement, turnIndex)).toBe(false);
	  });
  it ("create a move when turnIndex is 1", function() {
//	 example state = {board : [[...]...],
//		 playerStatus : [true, true, true, true], freeShapes = [[true, true,
//		 false...], [], [], []],
//		 delta : {shape : 0, placement : [[2,2]]}
	  var stateBeforeMove = {
			  board : [['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','','']],
	          playerStatus : [true, true, true, true],
	          freeShapes : [[true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true, true, true, true, true, true], 
	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true, true, true, true, true, true],
	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true, true, true, true, true, true],
	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true, true, true, true, true, true]],
	          delta : {}};
	  var placement = [[0,0]];
	  var shape = 0;
	  var turnIndex = 0;
	  var expectedMove = [{setTurn : {turnIndex : 1}},
			  {set : {key : 'board', value : [['0','','','','','','','','','','','','','','','','','','',''],
			          	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','',''],
			        	                   ['','','','','','','','','','','','','','','','','','','','']]}},
			  {set : {key : 'playerStatus', value : [true, true, true, true]}},
			  {set : {key : 'freeShapes', value : [[false, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true], 
			           	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true],
			        	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true],
			        	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true]]}},
			  {set : {key : 'delta', value : {shape : 0, placement : [[0,0]]}}}];
	  var generatedMove = _gameLogic.createMove(stateBeforeMove, placement, shape, turnIndex);
	  expect(angular.equals(expectedMove, generatedMove)).toBe(true);
  });
  it ("example of isMove ok to be true", function(){
	  var stateBeforeMove = {
			  board : [['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','','']],
	          playerStatus : [true, true, true, true],
	          freeShapes : [[true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true], 
	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true],
	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true],
	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true]],
	          delta : {}};
	  var move = [{setTurn : {turnIndex : 1}},
				  {set : {key : 'board', value : [['0','','','','','','','','','','','','','','','','','','',''],
					          	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','','']]}},
					  {set : {key : 'playerStatus', value : [true, true, true, true]}},
					  {set : {key : 'freeShapes', value : [[false, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true], 
					           	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true],
					        	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true],
					        	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true]]}},
					  {set : {key : 'delta', value : {shape : 0, placement : [[0,0]]}}}];
	  var turnIndexBeforeMove = 0;
	  var params = {move : move ,stateBeforeMove : stateBeforeMove,turnIndexBeforeMove : turnIndexBeforeMove};
	  expect(_gameLogic.isMoveOk(params)).toBe(true);
  });
  
  it ("example of isMove ok to be false", function(){
	  var stateBeforeMove = {
			  board : [['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','',''],
	                   ['','','','','','','','','','','','','','','','','','','','']],
	          playerStatus : [true, true, true, true],
	          freeShapes : [[true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true], 
	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true],
	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true],
	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true]],
	          delta : {}};
	  var move = [{setTurn : {turnIndex : 1}},
				  {set : {key : 'board', value : [['','0','','','','','','','','','','','','','','','','','',''],
					          	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','',''],
					        	                   ['','','','','','','','','','','','','','','','','','','','']]}},
					  {set : {key : 'playerStatus', value : [true, true, true, true]}},
					  {set : {key : 'freeShapes', value : [[false, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true], 
					           	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true],
					        	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true],
					        	                        [true, true, true, true, true,true, true, true, true, true,true, true, true, true, true,true, true, true, true, true, true]]}},
					  {set : {key : 'delta', value : {shape : 0, placement : [[0,0]]}}}];
	  var turnIndexBeforeMove = 0;
	  var params = {move : move ,stateBeforeMove : stateBeforeMove,turnIndexBeforeMove : turnIndexBeforeMove};
	  expect(_gameLogic.isMoveOk(params)).toBe(false);
  });
  
  it("an example of createMove which ends the match", function() {
	  var stateBeforeMove = {
			  board : [['0','0','','0','1','','','0','0','0','1','1','1','','3','3','','','1','1'],
	                   ['0','','0','0','1','1','1','0','','1','0','0','0','0','','','3','','','1'],
	                   ['1','','1','0','1','0','0','1','1','1','3','3','3','','2','3','3','3','1',''],
	                   ['','1','1','1','0','0','0','1','0','0','3','2','3','2','2','2','3','1','1','1'],
	                   ['1','','1','3','3','1','1','0','0','2','2','2','2','3','3','2','1','2','2','2'],
	                   ['1','','3','3','1','1','2','2','2','0','0','0','0','0','3','3','1','1','3',''],
	                   ['','2','','3','1','2','1','1','2','2','3','3','3','3','0','3','1','1','3',''],
	                   ['0','2','1','1','3','2','1','3','3','3','2','2','2','3','0','1','3','3','1','1'],
	                   ['0','2','1','3','3','2','1','3','2','2','0','0','2','0','0','1','1','3','','1'],
	                   ['0','2','1','1','3','2','1','3','2','2','0','0','2','0','1','0','1','3','3','1'],
	                   ['2','0','0','2','3','2','3','1','3','3','1','1','0','2','1','0','2','2','1','3'],
	                   ['2','','0','2','2','3','3','1','3','3','1','1','0','2','1','0','0','2','1','3'],
	                   ['2','2','0','0','2','3','0','1','1','1','0','0','0','2','1','0','2','2','1','3'],
	                   ['','0','2','2','0','3','0','0','0','0','1','1','2','2','1','2','0','','1',''],
	                   ['','0','2','2','0','0','3','3','3','3','3','1','1','1','2','2','0','0','','2'],
	                   ['0','0','0','2','1','0','0','1','1','1','1','3','3','2','2','0','0','2','','2'],
	                   ['2','2','2','0','1','1','1','0','1','0','3','3','2','3','3','3','2','2','2',''],
	                   ['','2','0','0','0','1','','0','0','0','2','2','2','3','3','2','3','2','','2'],
	                   ['2','','','0','','','3','3','3','3','2','','3','2','2','2','3','3','','3'],
	                   ['2','2','0','','0','0','','2','2','2','3','3','3','','','2','3','','3','3']],
	          playerStatus : [false, false, false, true],
	          freeShapes : [[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
	                        [true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]],
	          delta : {shape : 0, placement : [[17, 19]]}};
	  var placement = [[0,17]];
	  var shape = 0;
	  var turnIndex = 3;
	  var expectedMove = [{endMatch : {endMatchScore : [90, 90, 90, 90]}},
			  {set : {key : 'board', value : [['0','0','','0','1','','','0','0','0','1','1','1','','3','3','','3','1','1'],
			           	                   ['0','','0','0','1','1','1','0','','1','0','0','0','0','','','3','','','1'],
			        	                   ['1','','1','0','1','0','0','1','1','1','3','3','3','','2','3','3','3','1',''],
			        	                   ['','1','1','1','0','0','0','1','0','0','3','2','3','2','2','2','3','1','1','1'],
			        	                   ['1','','1','3','3','1','1','0','0','2','2','2','2','3','3','2','1','2','2','2'],
			        	                   ['1','','3','3','1','1','2','2','2','0','0','0','0','0','3','3','1','1','3',''],
			        	                   ['','2','','3','1','2','1','1','2','2','3','3','3','3','0','3','1','1','3',''],
			        	                   ['0','2','1','1','3','2','1','3','3','3','2','2','2','3','0','1','3','3','1','1'],
			        	                   ['0','2','1','3','3','2','1','3','2','2','0','0','2','0','0','1','1','3','','1'],
			        	                   ['0','2','1','1','3','2','1','3','2','2','0','0','2','0','1','0','1','3','3','1'],
			        	                   ['2','0','0','2','3','2','3','1','3','3','1','1','0','2','1','0','2','2','1','3'],
			        	                   ['2','','0','2','2','3','3','1','3','3','1','1','0','2','1','0','0','2','1','3'],
			        	                   ['2','2','0','0','2','3','0','1','1','1','0','0','0','2','1','0','2','2','1','3'],
			        	                   ['','0','2','2','0','3','0','0','0','0','1','1','2','2','1','2','0','','1',''],
			        	                   ['','0','2','2','0','0','3','3','3','3','3','1','1','1','2','2','0','0','','2'],
			        	                   ['0','0','0','2','1','0','0','1','1','1','1','3','3','2','2','0','0','2','','2'],
			        	                   ['2','2','2','0','1','1','1','0','1','0','3','3','2','3','3','3','2','2','2',''],
			        	                   ['','2','0','0','0','1','','0','0','0','2','2','2','3','3','2','3','2','','2'],
			        	                   ['2','','','0','','','3','3','3','3','2','','3','2','2','2','3','3','','3'],
			        	                   ['2','2','0','','0','0','','2','2','2','3','3','3','','','2','3','','3','3']]}},
			  {set : {key : 'playerStatus', value : [false, false, false, false]}},
			  {set : {key : 'freeShapes', value : [[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
			           	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
			        	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
			        	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]]}},
			  {set : {key : 'delta', value : {shape : 0, placement : [[0,17]]}}}];
	  var generatedMove = _gameLogic.createMove(stateBeforeMove, placement, shape, turnIndex);
	  expect(angular.equals(expectedMove, generatedMove)).toBe(true);
  });
  
  it("an example of get possible move return empty set because there is no possible move", function(){
	  var stateBeforeMove = {
			  board : [['0','0','','0','1','','','0','0','0','1','1','1','','3','3','','3','1','1'],
	                   ['0','','0','0','1','1','1','0','','1','0','0','0','0','','','3','','','1'],
	                   ['1','','1','0','1','0','0','1','1','1','3','3','3','','2','3','3','3','1',''],
	                   ['','1','1','1','0','0','0','1','0','0','3','2','3','2','2','2','3','1','1','1'],
	                   ['1','','1','3','3','1','1','0','0','2','2','2','2','3','3','2','1','2','2','2'],
	                   ['1','','3','3','1','1','2','2','2','0','0','0','0','0','3','3','1','1','3',''],
	                   ['','2','','3','1','2','1','1','2','2','3','3','3','3','0','3','1','1','3',''],
	                   ['0','2','1','1','3','2','1','3','3','3','2','2','2','3','0','1','3','3','1','1'],
	                   ['0','2','1','3','3','2','1','3','2','2','0','0','2','0','0','1','1','3','','1'],
	                   ['0','2','1','1','3','2','1','3','2','2','0','0','2','0','1','0','1','3','3','1'],
	                   ['2','0','0','2','3','2','3','1','3','3','1','1','0','2','1','0','2','2','1','3'],
	                   ['2','','0','2','2','3','3','1','3','3','1','1','0','2','1','0','0','2','1','3'],
	                   ['2','2','0','0','2','3','0','1','1','1','0','0','0','2','1','0','2','2','1','3'],
	                   ['','0','2','2','0','3','0','0','0','0','1','1','2','2','1','2','0','','1',''],
	                   ['','0','2','2','0','0','3','3','3','3','3','1','1','1','2','2','0','0','','2'],
	                   ['0','0','0','2','1','0','0','1','1','1','1','3','3','2','2','0','0','2','','2'],
	                   ['2','2','2','0','1','1','1','0','1','0','3','3','2','3','3','3','2','2','2',''],
	                   ['','2','0','0','0','1','','0','0','0','2','2','2','3','3','2','3','2','','2'],
	                   ['2','','','0','','','3','3','3','3','2','','3','2','2','2','3','3','','3'],
	                   ['2','2','0','','0','0','','2','2','2','3','3','3','','','2','3','','3','3']],
	          playerStatus : [false, false, false, false],
	          freeShapes : [[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]],
	          delta : {shape : 0, placement : [[0, 17]]}};
	  var turnIndex = 3;
	  var generatedPossibleMoves = _gameLogic.getPossibleMoves(stateBeforeMove, 3);
	  var expectedPossibleMoves = [];
	  expect(angular.equals(expectedPossibleMoves, generatedPossibleMoves)).toBe(true);
  });
 
  it("an example of get possible move for player3 should return 4 possible moves containing (0,17),(1,18),(4,1),(17,18), using shape #0", function(){
	  var stateBeforeMove = {
			  board : [['0','0','','0','1','','','0','0','0','1','1','1','','3','3','','','1','1'],
	                   ['0','','0','0','1','1','1','0','','1','0','0','0','0','','','3','','','1'],
	                   ['1','','1','0','1','0','0','1','1','1','3','3','3','','2','3','3','3','1',''],
	                   ['','1','1','1','0','0','0','1','0','0','3','2','3','2','2','2','3','1','1','1'],
	                   ['1','','1','3','3','1','1','0','0','2','2','2','2','3','3','2','1','2','2','2'],
	                   ['1','','3','3','1','1','2','2','2','0','0','0','0','0','3','3','1','1','3',''],
	                   ['','2','','3','1','2','1','1','2','2','3','3','3','3','0','3','1','1','3',''],
	                   ['0','2','1','1','3','2','1','3','3','3','2','2','2','3','0','1','3','3','1','1'],
	                   ['0','2','1','3','3','2','1','3','2','2','0','0','2','0','0','1','1','3','','1'],
	                   ['0','2','1','1','3','2','1','3','2','2','0','0','2','0','1','0','1','3','3','1'],
	                   ['2','0','0','2','3','2','3','1','3','3','1','1','0','2','1','0','2','2','1','3'],
	                   ['2','','0','2','2','3','3','1','3','3','1','1','0','2','1','0','0','2','1','3'],
	                   ['2','2','0','0','2','3','0','1','1','1','0','0','0','2','1','0','2','2','1','3'],
	                   ['','0','2','2','0','3','0','0','0','0','1','1','2','2','1','2','0','','1',''],
	                   ['','0','2','2','0','0','3','3','3','3','3','1','1','1','2','2','0','0','','2'],
	                   ['0','0','0','2','1','0','0','1','1','1','1','3','3','2','2','0','0','2','','2'],
	                   ['2','2','2','0','1','1','1','0','1','0','3','3','2','3','3','3','2','2','2',''],
	                   ['','2','0','0','0','1','','0','0','0','2','2','2','3','3','2','3','2','','2'],
	                   ['2','','','0','','','3','3','3','3','2','','3','2','2','2','3','3','','3'],
	                   ['2','2','0','','0','0','','2','2','2','3','3','3','','','2','3','','3','3']],
	          playerStatus : [false, false, false, true],
	          freeShapes : [[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
	                        [true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]],
	          delta : {shape : 0, placement : [[17, 19]]}};
	  var turnIndex = 3;
	  var generatedPossibleMoves = _gameLogic.getPossibleMoves(stateBeforeMove, turnIndex);
	  var move0 = [{endMatch : {endMatchScore : [90, 90, 90, 90]}},
				  {set : {key : 'board', value : [['0','0','','0','1','','','0','0','0','1','1','1','','3','3','','3','1','1'],
				           	                   ['0','','0','0','1','1','1','0','','1','0','0','0','0','','','3','','','1'],
				        	                   ['1','','1','0','1','0','0','1','1','1','3','3','3','','2','3','3','3','1',''],
				        	                   ['','1','1','1','0','0','0','1','0','0','3','2','3','2','2','2','3','1','1','1'],
				        	                   ['1','','1','3','3','1','1','0','0','2','2','2','2','3','3','2','1','2','2','2'],
				        	                   ['1','','3','3','1','1','2','2','2','0','0','0','0','0','3','3','1','1','3',''],
				        	                   ['','2','','3','1','2','1','1','2','2','3','3','3','3','0','3','1','1','3',''],
				        	                   ['0','2','1','1','3','2','1','3','3','3','2','2','2','3','0','1','3','3','1','1'],
				        	                   ['0','2','1','3','3','2','1','3','2','2','0','0','2','0','0','1','1','3','','1'],
				        	                   ['0','2','1','1','3','2','1','3','2','2','0','0','2','0','1','0','1','3','3','1'],
				        	                   ['2','0','0','2','3','2','3','1','3','3','1','1','0','2','1','0','2','2','1','3'],
				        	                   ['2','','0','2','2','3','3','1','3','3','1','1','0','2','1','0','0','2','1','3'],
				        	                   ['2','2','0','0','2','3','0','1','1','1','0','0','0','2','1','0','2','2','1','3'],
				        	                   ['','0','2','2','0','3','0','0','0','0','1','1','2','2','1','2','0','','1',''],
				        	                   ['','0','2','2','0','0','3','3','3','3','3','1','1','1','2','2','0','0','','2'],
				        	                   ['0','0','0','2','1','0','0','1','1','1','1','3','3','2','2','0','0','2','','2'],
				        	                   ['2','2','2','0','1','1','1','0','1','0','3','3','2','3','3','3','2','2','2',''],
				        	                   ['','2','0','0','0','1','','0','0','0','2','2','2','3','3','2','3','2','','2'],
				        	                   ['2','','','0','','','3','3','3','3','2','','3','2','2','2','3','3','','3'],
				        	                   ['2','2','0','','0','0','','2','2','2','3','3','3','','','2','3','','3','3']]}},
					  {set : {key : 'playerStatus', value : [false, false, false, false]}},
					  {set : {key : 'freeShapes', value : [[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
					           	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
					        	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
					        	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]]}},
					  {set : {key : 'delta', value : {shape : 0, placement : [[0,17]]}}}];
	  var move1 = [{endMatch : {endMatchScore : [90, 90, 90, 90]}},
					  {set : {key : 'board', value : [['0','0','','0','1','','','0','0','0','1','1','1','','3','3','','','1','1'],
					           	                   ['0','','0','0','1','1','1','0','','1','0','0','0','0','','','3','','3','1'],
					        	                   ['1','','1','0','1','0','0','1','1','1','3','3','3','','2','3','3','3','1',''],
					        	                   ['','1','1','1','0','0','0','1','0','0','3','2','3','2','2','2','3','1','1','1'],
					        	                   ['1','','1','3','3','1','1','0','0','2','2','2','2','3','3','2','1','2','2','2'],
					        	                   ['1','','3','3','1','1','2','2','2','0','0','0','0','0','3','3','1','1','3',''],
					        	                   ['','2','','3','1','2','1','1','2','2','3','3','3','3','0','3','1','1','3',''],
					        	                   ['0','2','1','1','3','2','1','3','3','3','2','2','2','3','0','1','3','3','1','1'],
					        	                   ['0','2','1','3','3','2','1','3','2','2','0','0','2','0','0','1','1','3','','1'],
					        	                   ['0','2','1','1','3','2','1','3','2','2','0','0','2','0','1','0','1','3','3','1'],
					        	                   ['2','0','0','2','3','2','3','1','3','3','1','1','0','2','1','0','2','2','1','3'],
					        	                   ['2','','0','2','2','3','3','1','3','3','1','1','0','2','1','0','0','2','1','3'],
					        	                   ['2','2','0','0','2','3','0','1','1','1','0','0','0','2','1','0','2','2','1','3'],
					        	                   ['','0','2','2','0','3','0','0','0','0','1','1','2','2','1','2','0','','1',''],
					        	                   ['','0','2','2','0','0','3','3','3','3','3','1','1','1','2','2','0','0','','2'],
					        	                   ['0','0','0','2','1','0','0','1','1','1','1','3','3','2','2','0','0','2','','2'],
					        	                   ['2','2','2','0','1','1','1','0','1','0','3','3','2','3','3','3','2','2','2',''],
					        	                   ['','2','0','0','0','1','','0','0','0','2','2','2','3','3','2','3','2','','2'],
					        	                   ['2','','','0','','','3','3','3','3','2','','3','2','2','2','3','3','','3'],
					        	                   ['2','2','0','','0','0','','2','2','2','3','3','3','','','2','3','','3','3']]}},
						  {set : {key : 'playerStatus', value : [false, false, false, false]}},
						  {set : {key : 'freeShapes', value : [[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
						           	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
						        	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
						        	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]]}},
						  {set : {key : 'delta', value : {shape : 0, placement : [[1,18]]}}}];
	  var move2 = [{endMatch : {endMatchScore : [90, 90, 90, 90]}},
				  {set : {key : 'board', value : [['0','0','','0','1','','','0','0','0','1','1','1','','3','3','','','1','1'],
				           	                   ['0','','0','0','1','1','1','0','','1','0','0','0','0','','','3','','','1'],
				        	                   ['1','','1','0','1','0','0','1','1','1','3','3','3','','2','3','3','3','1',''],
				        	                   ['','1','1','1','0','0','0','1','0','0','3','2','3','2','2','2','3','1','1','1'],
				        	                   ['1','3','1','3','3','1','1','0','0','2','2','2','2','3','3','2','1','2','2','2'],
				        	                   ['1','','3','3','1','1','2','2','2','0','0','0','0','0','3','3','1','1','3',''],
				        	                   ['','2','','3','1','2','1','1','2','2','3','3','3','3','0','3','1','1','3',''],
				        	                   ['0','2','1','1','3','2','1','3','3','3','2','2','2','3','0','1','3','3','1','1'],
				        	                   ['0','2','1','3','3','2','1','3','2','2','0','0','2','0','0','1','1','3','','1'],
				        	                   ['0','2','1','1','3','2','1','3','2','2','0','0','2','0','1','0','1','3','3','1'],
				        	                   ['2','0','0','2','3','2','3','1','3','3','1','1','0','2','1','0','2','2','1','3'],
				        	                   ['2','','0','2','2','3','3','1','3','3','1','1','0','2','1','0','0','2','1','3'],
				        	                   ['2','2','0','0','2','3','0','1','1','1','0','0','0','2','1','0','2','2','1','3'],
				        	                   ['','0','2','2','0','3','0','0','0','0','1','1','2','2','1','2','0','','1',''],
				        	                   ['','0','2','2','0','0','3','3','3','3','3','1','1','1','2','2','0','0','','2'],
				        	                   ['0','0','0','2','1','0','0','1','1','1','1','3','3','2','2','0','0','2','','2'],
				        	                   ['2','2','2','0','1','1','1','0','1','0','3','3','2','3','3','3','2','2','2',''],
				        	                   ['','2','0','0','0','1','','0','0','0','2','2','2','3','3','2','3','2','','2'],
				        	                   ['2','','','0','','','3','3','3','3','2','','3','2','2','2','3','3','','3'],
				        	                   ['2','2','0','','0','0','','2','2','2','3','3','3','','','2','3','','3','3']]}},
					  {set : {key : 'playerStatus', value : [false, false, false, false]}},
					  {set : {key : 'freeShapes', value : [[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
						           	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
						        	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
						        	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]]}},
					  {set : {key : 'delta', value : {shape : 0, placement : [[4,1]]}}}];
	  var move3 = [{endMatch : {endMatchScore : [90, 90, 90, 90]}},
				  {set : {key : 'board', value : [['0','0','','0','1','','','0','0','0','1','1','1','','3','3','','','1','1'],
				           	                   ['0','','0','0','1','1','1','0','','1','0','0','0','0','','','3','','','1'],
				        	                   ['1','','1','0','1','0','0','1','1','1','3','3','3','','2','3','3','3','1',''],
				        	                   ['','1','1','1','0','0','0','1','0','0','3','2','3','2','2','2','3','1','1','1'],
				        	                   ['1','','1','3','3','1','1','0','0','2','2','2','2','3','3','2','1','2','2','2'],
				        	                   ['1','','3','3','1','1','2','2','2','0','0','0','0','0','3','3','1','1','3',''],
				        	                   ['','2','','3','1','2','1','1','2','2','3','3','3','3','0','3','1','1','3',''],
				        	                   ['0','2','1','1','3','2','1','3','3','3','2','2','2','3','0','1','3','3','1','1'],
				        	                   ['0','2','1','3','3','2','1','3','2','2','0','0','2','0','0','1','1','3','','1'],
				        	                   ['0','2','1','1','3','2','1','3','2','2','0','0','2','0','1','0','1','3','3','1'],
				        	                   ['2','0','0','2','3','2','3','1','3','3','1','1','0','2','1','0','2','2','1','3'],
				        	                   ['2','','0','2','2','3','3','1','3','3','1','1','0','2','1','0','0','2','1','3'],
				        	                   ['2','2','0','0','2','3','0','1','1','1','0','0','0','2','1','0','2','2','1','3'],
				        	                   ['','0','2','2','0','3','0','0','0','0','1','1','2','2','1','2','0','','1',''],
				        	                   ['','0','2','2','0','0','3','3','3','3','3','1','1','1','2','2','0','0','','2'],
				        	                   ['0','0','0','2','1','0','0','1','1','1','1','3','3','2','2','0','0','2','','2'],
				        	                   ['2','2','2','0','1','1','1','0','1','0','3','3','2','3','3','3','2','2','2',''],
				        	                   ['','2','0','0','0','1','','0','0','0','2','2','2','3','3','2','3','2','3','2'],
				        	                   ['2','','','0','','','3','3','3','3','2','','3','2','2','2','3','3','','3'],
				        	                   ['2','2','0','','0','0','','2','2','2','3','3','3','','','2','3','','3','3']]}},
					  {set : {key : 'playerStatus', value : [false, false, false, false]}},
					  {set : {key : 'freeShapes', value : [[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
						           	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
						        	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],
						        	                        [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]]}},
					  {set : {key : 'delta', value : {shape : 0, placement : [[17,18]]}}}];
	  var expectedPossibleMoves = [move0, move1, move2, move3];
	  expect(angular.equals(expectedPossibleMoves, generatedPossibleMoves)).toBe(true);
  });
});